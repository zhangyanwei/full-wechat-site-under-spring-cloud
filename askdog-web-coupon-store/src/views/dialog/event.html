<div class="fragment-container">
    <div oc-lazy-load="['module/dialog/EventController']">
        <div class="dialog-container" ng-controller="EventController">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" ng-click="cancel()">×</button>
                    <h4 class="modal-title">{{message.title}}</h4>
                </div>
                <div class="modal-body">
                    <form class="form-horizontal" role="form" after-render="bindValidator">
                        <div class="form-group" ng-if="validationMessage">
                            <div class="col-sm-12">
                                <div class="alert alert-warning text-center">{{validationMessage}}</div>
                            </div>
                        </div>
                        <div class="form-group" ng-show="errorMessage">
                            <div class="col-sm-12">
                                <div class="alert alert-danger text-center alert-shake">{{errorMessage}}</div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label" for="event_name">活动名</label>
                            <div class="col-sm-8">
                                <input class="form-control" type="text" id="event_name" placeholder="请填写活动名" name="name" ng-model="event.name">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label" for="event_content">活动内容</label>
                            <div class="col-sm-8">
                                <textarea class="form-control" rows="5" id="event_content" name="content" ng-model="event.content"></textarea>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label" for="event_period">活动时间</label>
                            <div class="col-sm-8">
                                <input class="form-control" type="text" id="event_period" placeholder="请填写活动时间" name="period" ng-model="event.period">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label" for="event_description">活动说明</label>
                            <div class="col-sm-8">
                                <textarea class="form-control" rows="5" id="event_description" name="description" ng-model="event.description"></textarea>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label">指定优惠券</label>
                            <div class="col-sm-9">
                                <div class="form-inline">
                                    <select class="form-control" ng-options="item.id as item.name for item in coupons" name="coupon" ng-model="coupon">
                                        <option value="">请选择普通优惠券</option>
                                    </select>
                                    <span>目前仅支持普通优惠券</span>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label" for="event_poster">活动海报<small>(视频封面)</small></label>
                            <div class="col-sm-9" style="margin-top:5px;">
                                <input id="event_poster" type="file" name="poster" file-change="selectPoster(file)">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label" for="event_video">视频文件</label>
                            <div class="col-sm-9" style="margin-top:5px;">
                                <input type="file" id="event_video" name="video" file-change="selectVideo(file)">
                            </div>
                            <div class="col-sm-offset-3 col-sm-9" style="margin-top:5px;" ng-if="videoUploadStatus == 'uploading'">
                                <div class="progress" id="video-progress">
                                    <div class="progress-bar progress-bar-striped" role="progressbar"
                                         aria-valuenow="0"
                                         aria-valuemin="0"
                                         aria-valuemax="0"
                                         ng-style="{width: videoProgress}">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-group text-center">
                            <a type="button" class="btn btn-default" ng-click="cancel()">取消</a>
                            <button type="submit" class="btn btn-primary"
                                    ng-click="create()"
                                    ng-disabled="posterUploadStatus == 'succeed' && videoUploadStatus != 'succeed'">{{message.button}}
                            </button>
                        </div>
                    </form>
                </div>
            </div>

        </div>
    </div>
</div>