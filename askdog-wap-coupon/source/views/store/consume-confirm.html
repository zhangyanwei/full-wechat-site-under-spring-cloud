<div>
    <div oc-lazy-load="['module/store/ConsumeConfirmController','style/css/pages/cash-detail.css','style/css/pages/store-list.css']">
        <div style="padding: 10px; background: #eee;" ng-show="cashDetail != null" ng-controller="ConsumeConfirmController">
            <!--add coupon detail, copy from coupon detail html-->

            <div class="coupon-list-item" class="clearfix">
                <div class="coupon-value">{{::cashDetail.rule}}元</div>
                <div class="coupon-info">
                    <div class="coupon-info-storename">{{::cashDetail.store_basic.name}}</div>
                    <div class="coupon-info-type">现金抵值券</div>
                    <div class="coupon-info-expire">
                        <span ng-if="cashDetail.coupon_state == 'NOT_USED'">有效期至：{{::cashDetail.expire_time | date:"yyyy.MM.dd"}}</span>
                        <span ng-if="cashDetail.coupon_state == 'USED'">使用日期：{{::cashDetail.use_time | date:"yyyy.MM.dd"}}</span>
                        <span ng-if="cashDetail.coupon_state == 'EXPIRED'">过期日期：{{::cashDetail.expire_time | date:"yyyy.MM.dd"}}</span>
                    </div>
                </div>
                <div class="coupon-watermark"> 券 </div>
                <div class="coupon-arrow"></div>
                <div class="tag-bg" ng-class="{'used': item.coupon_state == 'USED' || item.coupon_state == 'EXPIRED'}"> </div>
                <div class="tag-text">
                    <span ng-if="cashDetail.coupon_state == 'NOT_USED'">未使用</span>
                    <span ng-if="cashDetail.coupon_state == 'USED'">已使用</span>
                    <span ng-if="cashDetail.coupon_state == 'EXPIRED'">已过期</span>
                </div>
            </div>
            <div class="coupon-bridge" style="top: 97px;"></div>
            <div class="coupon-list-item">
                <div class="coupon-info" style="height: auto;padding: 15px; text-align: left;">
                    <div ng-show="cashDetail.coupon_description" class="coupon-dashed">
                        使用说明：{{::cashDetail.coupon_description}}
                    </div>
                    <div class="coupon-dashed">
                        抵值券编号: {{::cashDetail.id}}
                    </div>
                    <div class="coupon-dashed">
                        最终解释权归商家所有
                    </div>
                </div>
            </div>

            <div style="text-align: center;padding:20px;">
                <div ng-show="!successMessage" class="input-group">
                    <span class="input-group-addon">订单号</span>
                    <input type="text" ng-model="orderId" class="form-control" placeholder="请输入商户流水号{{cashDetail.require_order_id ? '(必须)' : '(可选)'}}">
                </div>
                <div ng-show="!successMessage" style="text-align: center;color:#777;font-size: 20px; margin-top: 20px; margin-bottom: 20px">是否确认核销此优惠卷？</div>

                <div ng-show="errorMessage" class="alert alert-danger" role="alert">{{errorMessage}}</div>
                <div ng-show="successMessage" style="font-size: 25px"><span class="glyphicon glyphicon-ok-sign" style="color: #00c4ff"></span> 核销成功 </div>
                <div ng-show="!successMessage">
                    <button type="button" class="btn btn-default btn-primary btn-large" ng-click="confirm()"><span class="glyphicon glyphicon-saved"></span> 确认核销 </button>
                    <button type="button" class="btn btn-default btn-large" ng-click="cancel()">取消</button>
                </div>
            </div>

        </div>
    </div>
</div>
